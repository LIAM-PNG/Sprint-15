try{window.performance.mark("async-up-flow-persistent-upgrade-banner.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-up-flow-persistent-upgrade-banner"],{"4Jhl":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=(e,t)=>e===a("JMkI").a&&t===a("JMkI").c?14:30},"8m3F":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(a("q1tI")),n=a("QEuf");const i=e=>r.default.createElement(n.Icon,Object.assign({
dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M15.185 7.4l-3.184 3.185-3.186-3.186a.507.507 0 00-.712.003l-.7.701a.496.496 0 00-.004.712l3.185 3.184L7.4 15.185a.507.507 0 00.004.712l.7.7c.206.207.516.2.712.004l3.186-3.185 3.184 3.185a.507.507 0 00.712-.004l.701-.7a.496.496 0 00.003-.712l-3.186-3.186 3.186-3.184a.507.507 0 00-.003-.712l-.7-.7a.508.508 0 00-.36-.153.5.5 0 00-.353.15z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));i.displayName="EditorCloseIcon";var s=i;t.default=s},"94xy":function(e,t,a){"use strict";var r=a("3tO9"),n=a.n(r),i=a("pVnL"),s=a.n(i),o=a("lSNA"),l=a.n(o),d=a("q1tI"),p=a.n(d),c=a("qKvR");const u=Object(a("56zV").a)("appearance",{error:{light:"var(--ds-background-boldDanger-resting, #DE350B)",dark:"var(--ds-background-boldDanger-resting, #FF5630)"},warning:{light:"var(--ds-background-boldWarning-resting, #FFAB00)",dark:"var(--ds-background-boldWarning-resting, #FFAB00)"},announcement:{
light:"var(--ds-background-boldNeutral-resting, #42526E)",dark:"var(--ds-background-boldNeutral-resting, #42526E)"}}),g=Object(a("56zV").a)("appearance",{error:{light:"var(--ds-text-onBold, #FFFFFF)",dark:"var(--ds-text-onBold, #202B3D)"},warning:{light:"var(--ds-text-onBoldWarning, #253858)",dark:"var(--ds-text-onBoldWarning, #202B3D)"},announcement:{light:"var(--ds-text-onBold, #FFFFFF)",dark:"var(--ds-text-onBold, #FFFFFF)"}}),f={name:"juaqb1",styles:"display:flex;align-items:center;flex:0 0 auto;flex-direction:column;@media screen and (forced-colors: active){fill:CanvasText;filter:grayscale(100%);}"},y=Object(c.d)({overflow:"hidden",transition:"max-height 0.25s ease-in-out"}),h=Object(c.d)({display:"flex",margin:"auto",padding:1.5*Object(a("7w+A").h)(),alignItems:"center",justifyContent:"center",color:"currentColor",fontWeight:500,textAlign:"center",transition:"color 0.25s ease-in-out","a, a:visited, a:hover, a:focus, a:active":{color:"currentColor",textDecoration:"underline"}
}),b={name:"n4rlvu",styles:"max-width:876px;"},w=Object(c.d)({padding:Object(a("7w+A").h)()/2,flex:"0 1 auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),m={name:"56ap6q",styles:"text-overflow:none;"},x={name:"p5gud8",styles:"max-height:52px;overflow:visible;"},v={name:"blfo5x",styles:"max-height:88px;overflow:scroll;"};class j extends p.a.Component{constructor(...e){super(...e),l()(this,"state",{height:0}),l()(this,"getHeight",(()=>{this.containerRef&&this.setState({height:this.containerRef.clientHeight})})),l()(this,"innerRef",(e=>{e&&(this.containerRef=e,this.props.innerRef&&this.props.innerRef(e),this.getHeight())})),l()(this,"getA11yProps",(e=>{const{isOpen:t}=this.props,a={"aria-hidden":!t,role:"alert"};return"announcement"===e?n()(n()({},a),{},{"aria-label":"announcement",tabIndex:0,role:"region"}):a}))}render(){const{appearance:e,children:t,icon:a,isOpen:r,testId:n}=this.props,i=this.getA11yProps(e),o="announcement"===e,l=u({appearance:e}),d=g({appearance:e
});return Object(c.e)("div",{css:y,style:{maxHeight:`${r?this.state.height:0}px`}},Object(c.e)("div",s()({css:[x,o&&v],style:{backgroundColor:l,color:d},ref:this.innerRef,"data-testid":n},i),Object(c.e)("div",{css:[h,o&&b]},Object(c.e)("span",{css:f,style:{fill:l}},a),Object(c.e)("div",{css:[w,o&&m]},t))))}}j.displayName="Banner",l()(j,"defaultProps",{appearance:"warning",isOpen:!1});t.a=j},"9v46":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=()=>{const[{data:e}]=Object(a("vDA1").b)();return null!=e&&e.project?Object(a("I9QI").a)(e.project.type):null}},DWq1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(a("q1tI")),n=a("QEuf");const i=e=>r.default.createElement(n.Icon,Object.assign({
dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><path d="M12.938 4.967c-.518-.978-1.36-.974-1.876 0L3.938 18.425c-.518.978-.045 1.771 1.057 1.771h14.01c1.102 0 1.573-.797 1.057-1.771L12.938 4.967z" fill="currentColor"/><path d="M12 15a1 1 0 01-1-1V9a1 1 0 012 0v5a1 1 0 01-1 1m0 3a1 1 0 010-2 1 1 0 010 2" fill="inherit"/></g></svg>'},e));i.displayName="WarningIcon";var s=i;t.default=s},GK83:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return o}));var r=a("3tO9"),n=a.n(r);const i=(e,t,a)=>`${e}/rest/api/latest/user/properties/${a}?accountId=${encodeURIComponent(t)}`,s=async(e,t,r,s)=>fetch(i(e,t,r),n()(n()({},a("sZu9").a),{},{method:"PUT",body:s})),o=(e,t,r)=>fetch(i(e,t,r),a("sZu9").a).then((e=>200===e.status?e.json():e.text().then((t=>{throw new(a("tHEo").a)(e.status,t)})))).then((e=>e.value))},I9QI:function(e,t,a){"use strict";a.d(t,"a",(function(){
return r}));const r=e=>{switch(e){case"business":return"core";case"product_discovery":case"software":return"software";case"service_desk":return"serviceDesk";default:return"unknown"}}},IBxX:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const r={renderUpflowModal:!1,product:"jira-software",touchpointId:"",flow:"learn-more",onClose:()=>{},targetEdition:a("JMkI").a},n=Object(a("0b8M").a)({name:"upflow-modal-store",initialState:r,actions:{mountUpflowModal:({targetEdition:e,product:t,flow:a,touchpointId:r,subRoute:n,onClose:i,onOpen:s})=>({setState:o})=>{o({targetEdition:e,product:t,flow:a,touchpointId:r,subRoute:n,onClose:i,onOpen:s,renderUpflowModal:!0})},unMountUpflowModal:()=>({setState:e})=>{e({renderUpflowModal:!1})}}}),i=(Object(a("Y6nV").a)(n),Object(a("UCyb").a)(n),Object(a("dq9g").a)(n))},UHxn:function(e,t,a){"use strict";t.a=e=>{const t=e.licensedProducts,r=[];return t[a("VePs").a]&&r.push(a("VePs").a),t[a("VePs").c]&&r.push(a("VePs").c),
t[a("VePs").d]&&r.push(a("VePs").d),r}},fKwj:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=(e,t)=>e===a("VePs").d?t.appEditions.software:e===a("VePs").c?t.appEditions.serviceDesk:t.appEditions.core},uXEq:function(t,a,r){"use strict";r.r(a),r.d(a,"BannerContent",(function(){return E}));var n=r("q1tI"),i=r.n(n);const s=[0,6048e5,18144e5,36288e5],o=e=>"pre-trial"+e,l=e=>({growthFeature:"persistentUpgrade",touchpointId:o(e),flowId:"upgradeFlow"}),d={trialStage:"pre-trial",index:-1,displayNextAt:(new Date).toISOString(),loading:!1,showBanner:!1,hasError:!1},p=e=>e===r("VePs").d?"growth-puet-banner-cadence":"growth-puet-banner-cadence-jsm",c={initializeState:(t,a,n)=>async({setState:i,getState:s},{product:l})=>{if(!0===s().loading)return;const d=p(l),c={growthFeature:"persistentUpgrade",touchpointId:o(s().index),flowId:"upgradeFlow"};i({loading:!0});try{const e=await Object(r("GK83").b)(t,a,d);if(e){i({loading:!1,index:e.index,displayNextAt:e.displayNextAt,
trialStage:e.trialStage,showBanner:!0});const t=n({type:"sendOperationalEvent",action:"success",actionSubject:"getUserPropertyApiCall",actionSubjectId:"persistentUpgradeBanner"});Object(r("yy8q").b)(t,"getUserPropertyApiCall success",c)}}catch(e){if(404===e.statusCode){i({loading:!1,index:0,showBanner:!0});const e=n({type:"sendOperationalEvent",action:"success",actionSubject:"getUserPropertyApiCall",actionSubjectId:"persistentUpgradeBanner"});Object(r("yy8q").b)(e,"getUserPropertyApiCall success",c)}else{i({loading:!1,showBanner:!1,hasError:!0});const a=n({type:"sendOperationalEvent",action:"failed",actionSubject:"getUserPropertyApiCall",actionSubjectId:"persistentUpgradeBanner"});Object(r("yy8q").b)(a,"getUserPropertyApiCall failed",{growthFeature:"persistentUpgrade",touchpointId:o(s().index),flowId:"upgradeFlow",errorMessage:e.message,errorStatus:e.statusCode})}}},updateState:(t,a,n,i)=>async({setState:l,getState:d},{product:c})=>{const u=p(c),g=new Date,f={
growthFeature:"persistentUpgrade",touchpointId:o(d().index),flowId:"upgradeFlow"};l({index:d().index+1,displayNextAt:new Date(g.getTime()+s[d().index>=3?d().index:d().index+1]).toISOString(),trialStage:n});const y={index:d().index,displayNextAt:d().displayNextAt,trialStage:d().trialStage};try{await Object(r("GK83").c)(t,a,u,JSON.stringify(y)).then((()=>{const e=i({type:"sendOperationalEvent",action:"success",actionSubject:"setUserPropertyApiCall",actionSubjectId:"persistentUpgradeBanner"});Object(r("yy8q").b)(e,"setUserPropertyApiCall success",f)}))}catch(e){l({showBanner:!1,hasError:!0});const a=i({type:"sendOperationalEvent",action:"failed",actionSubject:"setUserPropertyApiCall",actionSubjectId:"persistentUpgradeBanner"});Object(r("yy8q").b)(a,"setUserPropertyApiCall failed",{growthFeature:"persistentUpgrade",touchpointId:o(d().index),flowId:"upgradeFlow",errorMessage:e.message,errorStatus:e.statusCode})}}},u=Object(r("0b8M").a)({name:"Banner Cadence Info",initialState:d,actions:c
}),g=Object(r("UCyb").a)(u),f=Object(r("dq9g").a)(u);var y=r("vOnD");const h=y.default.div.withConfig({componentId:"y10gou-0"})`padding:${e=>e.isFullWidth?"10px 0px":"10px 40px"};white-space:nowrap;overflow:hidden;text-overflow:ellipsis;& *{max-height:32px !important;padding:${e=>e.isWarning?"1px !important":"2px !important"};}`,b=y.default.div.withConfig({componentId:"sc-162l504-0"})`height:24px;width:24px;cursor:pointer;margin-top:${e=>e.isWarning?"-31px":"-34px"};margin-right:5px;float:right;position:relative;z-index:1;background-color:${e=>e.isWarning?"#FFAB00":"#42526E"};color:${e=>e.isWarning?"#253858":"#FFFFFF"};&:hover{color:${"#8993A4"};}`;var w=({isWarning:e=!1,children:t,onDismiss:a=(()=>{})})=>{const s=Object(n.useCallback)((e=>{e&&(e.style.overflow="hidden",e.children.length>0&&(e.children[0].style.maxWidth="1200px"))}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(r("94xy").a,{innerRef:s,appearance:e?"warning":"announcement",
icon:e?i.a.createElement(r.n(r("DWq1")).a,{label:"Warning icon",secondaryColor:"inherit"}):i.a.createElement("div",null),isOpen:!0},t),i.a.createElement(b,{isWarning:e,onClick:a},i.a.createElement(r.n(r("8m3F")).a,null)))},m=r("pVnL"),x=r.n(m),v=r("JRPe"),j=Object(v.defineMessages)({preTrialDay0:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0",defaultMessage:"Does your team need more from Jira? {preTrialDayXLink}"},preTrialDay0Link:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-link",defaultMessage:"Get a free trial of our Standard plan."},preTrialDay7:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7",defaultMessage:"Set project and issue permissions. {preTrialDayXLink}"},preTrialDay7Link:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-link",defaultMessage:"Try it in a {trialLength, plural, one {#-day} other {#-day}} trial of Jira Software Standard."},preTrialDay21:{
id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21",defaultMessage:"You\u2019re eligible for a free {trialLength, plural, one {#-day} other {#-day}} trial of our Jira Software Standard plan. {preTrialDayXLink}"},preTrialDay21Link:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-link",defaultMessage:"Start now!"},preTrialDay42:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42",defaultMessage:"Unlock more features with a free {trialLength, plural, one {#-day} other {#-day}} {preTrialDayXLink}."},preTrialDay42Link:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-link",defaultMessage:"trial of Jira Software Standard"},default:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.default",defaultMessage:"Enjoy Jira Software."},preTrialDay0Jsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-jsm",
defaultMessage:"Unlock new features with a free {preTrialDayXLink}."},preTrialDay0LinkJsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-link-jsm",defaultMessage:"{trialLength, plural, one {#-day} other {#-day}} trial of Jira Service Management Standard"},preTrialDay7Jsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-jsm",defaultMessage:"Need more ways to deliver service? {preTrialDayXLink}"},preTrialDay7LinkJsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-link-jsm",defaultMessage:"Get a free upgrade to Jira Service Management Standard for {trialLength, plural, one {#-day} other {#-days}}."},preTrialDay21Jsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-jsm",defaultMessage:"You\u2019re eligible for a free {trialLength, plural, one {#-day} other {#-day}} trial of our Jira Service Management Standard plan. {preTrialDayXLink}"},preTrialDay21LinkJsm:{
id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-link-jsm",defaultMessage:"Start now!"},preTrialDay42Jsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-jsm",defaultMessage:"Unlock more features with a free {trialLength, plural, one {#-day} other {#-day}} {preTrialDayXLink}."},preTrialDay42LinkJsm:{id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-link-jsm",defaultMessage:"trial of Jira Service Management"}});const k=y.default.a.withConfig({componentId:"sc-18t4rjq-0"
})`color:${"#FFFFFF"};text-decoration:underline;cursor:pointer;white-space:nowrap;&:hover{color:${"#FFFFFF"};}`,F=["preTrialDay0","preTrialDay7","preTrialDay21","preTrialDay42"],O=["preTrialDay0Link","preTrialDay7Link","preTrialDay21Link","preTrialDay42Link"],S=["preTrialDay0Jsm","preTrialDay7Jsm","preTrialDay21Jsm","preTrialDay42Jsm"],D=["preTrialDay0LinkJsm","preTrialDay7LinkJsm","preTrialDay21LinkJsm","preTrialDay42LinkJsm"],I=({cadenceIndex:e=-1,onBannerClick:t=(()=>{}),useIntl:a=r("NRyt").d,product:s,trialLength:o})=>{const{formatMessage:l}=a(),d=s===r("VePs").d?O:D,p=s===r("VePs").d?F:S,c=Object(n.useCallback)((()=>i.a.createElement(k,{onClick:t,href:"",target:"","data-testid":"persistent-upgrade-banner-link"},l(j[d[e]],{trialLength:o}))),[d,e,l,t,o]);return e>=0&&e<=3?i.a.createElement(v.FormattedMessage,x()({},j[p[e]],{values:{trialLength:o,preTrialDayXLink:c()}})):i.a.createElement(v.FormattedMessage,j.default)};I.displayName="PreTrialBannerText";var M=I
;const E=({isFullWidth:e=!1,useIntl:t=r("NRyt").d,useUpflowModal:a=r("IBxX").a,product:s})=>{const d=Object(r("rBSy").c)(),[p,c]=f(),{createAnalyticsEvent:u}=Object(r("rZ/p").a)(),[,{mountUpflowModal:g}]=a(),[y,b]=Object(n.useState)(!1),{atlassianAccountId:m,baseUrl:x}=d,v=Object(r("fKwj").a)(s,d),j=v===r("JMkI").a,k=p.showBanner&&Date.now()>=new Date(p.displayNextAt)&&p.index<=3,F=j&&!y&&k,O=Object(r("4Jhl").a)(v,r("JMkI").c),S={growthFeature:"persistentUpgrade",touchpointId:o(p.index),flowId:"upgradeFlow"},D=Object(n.useCallback)((e=>{const t=u({action:"clicked",actionSubject:"persistentUpgradeBanner"});Object(r("yy8q").h)(t,"bannerLinkClicked",S),e.preventDefault(),g({targetEdition:r("JMkI").c,product:s,flow:"persistent-upgrade",touchpointId:o(p.index)})}),[S,u,g,s,p.index]),I=Object(n.useCallback)((()=>{const e=u({action:"dismissed",actionSubject:"persistentUpgradeBanner"});Object(r("yy8q").h)(e,"bannerCloseClicked",S),m&&c.updateState(x,m,"pre-trial",u)}),[u,S,m,c,x])
;return Object(n.useEffect)((()=>{-1===p.index&&!p.hasError&&j&&m&&c.initializeState(x,m,u)}),[p,c,x,m,u,j]),F&&i.a.createElement(h,{isFullWidth:e,hidden:p.loading},i.a.createElement(r("02VO").d,{eventName:"persistentUpgradeBanner viewed",attributes:l(p.index)}),i.a.createElement(w,{onDismiss:()=>{b(!0),I()}},i.a.createElement(M,{cadenceIndex:p.index,onBannerClick:D,useIntl:t,product:s,trialLength:O})))},U=({isBannerEnabled:e=!1,isFullWidth:t=!1,useIntl:a=r("NRyt").d,useUpflowModal:n=r("IBxX").a})=>{const s=Object(r("rBSy").c)(),{isSiteAdmin:o}=s,l=Object(r("UHxn").a)(s),d=((e,t)=>{if("software"===e)return r("VePs").d;if("serviceDesk"===e)return r("VePs").c;if(1===t.length){if(t[0]===r("VePs").d)return r("VePs").d;if(t[0]===r("VePs").c)return r("VePs").c}return null})(Object(r("9v46").a)(),l);return d&&e&&o?i.a.createElement(r("ho8o").a,{id:"persistentUpgrade",packageName:"persistentUpgradeBanner",render:()=>null},i.a.createElement(r("PF8x").a,{id:"persistentUpgrade",
packageName:"persistentUpgradeBanner"},i.a.createElement(g,{scope:d,product:d},i.a.createElement(E,{isFullWidth:t,useIntl:a,useUpflowModal:n,product:d})))):null};U.displayName="PersistentUpgradeBanner";a.default=U}}]);try{window.__jsEvalStop("async-up-flow-persistent-upgrade-banner.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-up-flow-persistent-upgrade-banner.88cfa7bbc1f5796a65f3.8.js.map